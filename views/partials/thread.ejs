<article id="topContainer" class="bg-theme-postPrimary rounded-2xl min-w-[300px] w-[1500px] h-auto lg:max-w-[55vw] max-w-[97%] resize p-2 mt-2 ">
    <div class="flex flex-row items-center hidden gap-1 h-fit xl:gap-3 grow text-theme-textMuted" id="threadCollapsed">
        <h1 class="text-lg font-bold truncate align-middle lg:text-2xl"><%= thread.posts[0].sub? thread.posts[0].sub:"" %></h1>
        <div class="text-base">
            <span class="align-middle material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">image</span>
            <small class="text-base"><%= thread.posts[0].images %></small>
            <span class="align-middle material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">chat</span>
            <small class="text-base"><%= thread.posts[0].replies %></small>
        </div>
        <small class="hidden text-base text-right xl:inline grow">
            x.xh ago • dd.mm.yyyy • hh:mm:ss
        </small>
        <button id="expandButton" class="rounded-lg size-6 bg-theme-bgAccent xl:order-first" >
            <span class="content-center text-white material-symbols-rounded" style="font-variation-settings: 'wght' 700;">add</span>
        </button>
    </div>


    <div id="threadExpanded" class="flex flex-col gap-1 resize overflow-hidden content-center">
        
        <!-- -------------------- POST TITLE -------------------- -->
        <div class="flex flex-row items-center gap-3 " id="threadTitle">
            <h1 class="text-lg font-bold align-middle lg:text-2xl grow hover:text-theme-textAccent cursor-pointer"><%= thread.posts[0].sub? thread.posts[0].sub:"- No Title -" %></h1>    <!-- if there is no title it comes back as undefined and crashes, so we check -->
            <small class="hidden text-base text-theme-textSecond xl:inline justify-self-end">
                x.xh ago • dd.mm.yyyy • hh:mm:ss
            </small>
            <button id="collapseButton" class="rounded-lg size-6 bg-theme-bgAccent xl:order-first" >
                <span class="content-center text-white material-symbols-rounded" style="font-variation-settings: 'wght' 700;">remove</span>
            </button>
        </div>

        <!-- -------------------- POST MAIN -------------------- -->

        <div id="threadMain" class="flex flex-row gap-2 grow">
            <div id="threadImage" class="hidden xl:flex flex-col w-1/3 h-auto min-h-[300px] bg-theme-postSecond cursor-pointer">
                <a href=""></a>
                <img src="<%= pageImages[thread.posts[0].tim] %>" alt="" class="my-auto">
            </div>
            
            <div  class="flex flex-col gap-2 xl:w-2/3 grow">
                <div id="threadMainMenu" class="flex flex-row w-full gap-1 text-theme-textSecond">
                    <div class="p-1 text-sm bg-theme-postSecond grow line-clamp-2" id="replySection">
                        Replies: 
                    </div>
                    <div class="z-auto tooltip" data-tip="Report">
                        <button class="p-2 border-0 material-symbols-rounded btn text-theme-textSecond bg-theme-postSecond" style="font-variation-settings: 'FILL' 1;">flag</button>
                    </div>
                    <div class="z-auto tooltip" data-tip="Share">
                        <button class="p-2 border-0 material-symbols-rounded btn text-theme-textSecond bg-theme-postSecond" style="font-variation-settings: 'FILL' 1;">share</button>
                    </div>
                    <div class="z-auto tooltip" data-tip="Bookmark">
                        <button class="p-2 border-0 material-symbols-rounded btn text-theme-textSecond bg-theme-postSecond" style="font-variation-settings: 'FILL' 0;">bookmark</button>
                    </div>
                    <div class="z-auto tooltip" data-tip="Reply">
                        <button class="font-bold leading-snug text-white border-0 btn bg-theme-bgAccent"><%= thread.posts[0].name %> <br> № <%= thread.posts[0].no %> </button>
                    </div>
                    
                </div>

                <div id="threadImageMobile" class="xl:hidden h-[25dvh] bg-theme-postSecond w-full object-contain ">
                    <img src="<%= pageImages[thread.posts[0].tim] %>" alt="" class="my-auto object-contain size-full">
                </div>

                <p class="px-2 font-normal leading-tight text-justify grow " id="threadComment">
                    <%- thread.posts[0].com? thread.posts[0].com:"" %>
                </p>
                
                <div id="replyMenu" class="flex gap-2 p-1 rounded-lg bg-theme-postSecond text-theme-textSecond">
                    
                    <div class="text-base  min-w-[90px] align-middle">
                        <span class="align-middle material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">image</span>
                        <small class="mr-1 text-base"><%= thread.posts[0].images %></small>
                        <span class="align-middle material-symbols-rounded" style="font-variation-settings: 'FILL' 1;">chat</span>
                        <small class="text-base"><%= thread.posts[0].replies %></small>
                    </div>
                    <span class="truncate grow">
                        total images/replies 
                    </span>
                    <span class="content-center h-full px-1 text-white rounded-lg cursor-pointer material-symbols-rounded xl:order-first bg-theme-bgAccent" style="font-variation-settings: 'wght' 700; font-size: large;">add</span>
                </div>

            </div>
        </div>

        
        <section>
            <ul>
                <% thread.posts.slice(1).forEach(function (post){ %>
                    <%- include("./reply.ejs", {post, pageImages,}) %>
                <% }); %>
            </ul>
        </section>
    </div>



</article>